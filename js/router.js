function initRouter(){console.log("\uD83D\uDD17 Router inicializado");let t=document.querySelector("main");if(!t){console.warn("router: <main> n\xe3o encontrado. SPA n\xe3o ativado.");return}async function e(e,n={pushState:!0}){try{let r=await fetch(e,{cache:"no-store"});if(!r.ok)throw Error("fetch failed: "+r.status);let i=await r.text(),a=new DOMParser,o=a.parseFromString(i,"text/html"),s=o.querySelector("main");s?t.innerHTML=s.innerHTML:t.innerHTML=o.body.innerHTML;let l=o.querySelector("title");if(l&&(document.title=l.textContent),!1!==n.pushState)try{history.pushState({},"",e)}catch(c){}"function"==typeof initPageEnhancements&&initPageEnhancements(),"function"==typeof initTemplates&&initTemplates(),"function"==typeof initFormValidation&&initFormValidation(),window.scrollTo(0,0)}catch(h){console.error("router navigate error:",h),window.location.href=e}}document.addEventListener("click",function(t){let n=t.target;for(;n&&"A"!==n.tagName;)n=n.parentElement;if(!n)return;let r=n.getAttribute("href");if(!(!r||r.startsWith("http")&&!r.includes(location.hostname)||r.startsWith("mailto:")||r.startsWith("tel:")||r.startsWith("#"))&&!r.endsWith(".pdf")&&(r.endsWith(".html")||"/"===r||r.startsWith(location.origin)||!r.includes("://"))){t.preventDefault();let i=new URL(r,location.href).href;e(i)}},!0),window.addEventListener("popstate",()=>{e(location.href,{pushState:!1})})}
